<!DOCTYPE html>
<html lang="en" dir="ltr" ng-app="BlogApp">
  <head>
    <meta charset="utf-8">
    <title>WMXN</title>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.0/angular.min.js"></script>
    <script src="js/app.js"></script>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  </head>

  <body class="body" ng-controller="BlogController as ctrl">

    <!-- START container styling -->
    <div class="container">
      <div class="sticky-top mt-5 mb-5">
        <h1>{{ctrl.title}}</h1>
      </div>

      <!-- Snippet Start -->
      <div
      class="snippet-createform"
      ng-include="'partials/snippet-form.html'">
      </div>
      <!-- END Snippet Form -->




    <!-- Start Create Blog Post Form -->
    <div
    class="blogPost-createform"
    ng-include="'partials/blog-form.html'">
    </div>


    <!-- END CREATE FORM -->



<!-- IDEA: Bootstrap container -->
  <div ng-repeat="post in ctrl.blog">
    <!-- IDEA: BOOTSTRAP CARD -->

<!-- START POST -->
  <div class="card mb-3 ml-2 mt-5 bg-secondary text-black" style="max-width: 540px;">
  <div class="row no-gutters blog-card">
    <div class="col-md-4">
      <img src="{{post.img}}" class="card-img" alt="Post Image">
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title">Username: {{post.username}}</h5>

        <p class="card-text">{{post.entry}}</p>

        <!-- likes -->
        <form ng-submit="ctrl.addLikes(post)">
          <input type="hidden" ng-blog="ctrl.likes" value={{post.likes}}>
          <input id="like-btn" type="submit" name="blog-like" value="{{post.likes}} likes"/>
        </form><br/>


        <!-- Comment Button -->
        <button type="button"
        ng-click="ctrl.indexOfCommentFormToShow = $index" ng-if="$index !== ctrl.indexOfCommentFormToShow" name="button">Leave Comment</button>
<!--  -->
        <!-- Start Comment Form -->
        <form ng-submit="ctrl.createBlog()">
          <div class="form-group" ng-if="$index === ctrl.indexOfCommentFormToShow">

            <input type="text" class="form-control" ng-model="ctrl.comment" placeholder="Leave Comment">

              <button type="submit" class="btn mt-3">Leave Comment</button>

              <button type="" ng-click="ctrl.indexOfCommentFormToShow = !$index" class="btn ml-3 mt-3">Cancel</button>

          </div>
        </form>
        <!-- <p>{{post.comment}}</p> -->

        <!-- START edit form -->
        <form ng-submit="ctrl.editBlog(post)">
          <div class="form-group" ng-if="$index === ctrl.indexOfEditFormToShow">

            <label for="entry">Edit Entry</label>
            <input type="text" class="form-control" id="entry" ng-model="ctrl.updatedEntry" value="{{post.entry}}">

            <label for="img">Edit Image</label>
            <input type="text" class="form-control" id="img" ng-model="ctrl.updatedImg" value="{{post.img}}">

            <button id="edit-btn" type="submit" class="btn mt-3">Update Post</button>

            <button id="edit-btn" type="" ng-click="ctrl.indexOfEditFormToShow = !$index" class="btn ml-3 mt-3">Cancel</button>

          </div>
          <!-- END Edit div -->
        </form>
        <!-- END Edit form -->

        <p class="card-text">
          <!-- Delete Button -->
          <img
          id="edit-del-btn"
          ng-click="ctrl.deleteBlog(post)"
          src="https://img.icons8.com/material-outlined/96/000000/delete-forever.png"/>

          <!-- edit button -->
          <img
            id="edit-del-btn"
            ng-if="$index !== ctrl.indexOfEditFormToShow"
            ng-click="ctrl.indexOfEditFormToShow = $index"
            src="https://img.icons8.com/ios-glyphs/30/000000/edit.png"/>
          <small class="text-muted" id="date">{{post.date}}</small>

        </p>
      </div>
    </div>
  </div>
</div>
<!-- Ends Post -->

</div>
<!-- Repeat Ends -->
<!--  End bootstrap container -->




<!-- snippet card div  -->
<div class="card mt-3 ml-2" ng-repeat="code in ctrl.post" style="max-width: 540px;">
  <div class="card-body">
    <h5 class="card-title">User: {{code.user}}</h5>
    <p class="card-text">{{code.snippet}}</p>

    <!-- START edit snippet form -->
    <form ng-submit="ctrl.editSnippet(code)">
      <div class="form-group" ng-if="$index === ctrl.indexOfSEdditFormToShow">

        <label for="entry">Edit Code</label>
        <input type="text" class="form-control" id="entry" ng-model="ctrl.updatedSnippet" value="{{code.snippet}}">

        <button type="submit" class="btn mt-3">Update Post</button>

        <button type="" ng-click="ctrl.indexOfSEdditFormToShow = !$index" class="btn ml-3 mt-3">Cancel</button>

      </div>
      <!-- END Edit Snippet div -->
    </form>
    <!-- END Edit Snippet form -->

    <!-- likes -->
    <form ng-submit="ctrl.snippetLikes(code)">
      <input type="hidden" ng-blog="ctrl.likes" value={{code.likes}}>
      <input id="like-btn" type="submit" name="code-like" value="{{code.likes}} likes"/>
    </form><br/>

    <img
    id="edit-del-btn"
    ng-click="ctrl.deleteSnippet(code)"
    src="https://img.icons8.com/material-outlined/96/000000/delete-forever.png"/>

    <!-- edit snippet button -->
    <img
      id="edit-del-btn"
      ng-if="$index !== ctrl.indexOfSEdditFormToShow"
      ng-click="ctrl.indexOfSEdditFormToShow = $index"
      src="https://img.icons8.com/ios-glyphs/30/000000/edit.png"/>

    <p small class="text-muted" id="date">{{code.date}}</p>
  </div>
</div>
</div>
  </body>
</html>

<!-- COMMENT DISPLAY CODE TEST -->
<!-- <div class="comment-div">
  <ul ng-repeat="addComm in ctrl.comments">
    <li>
      {{addComm.comment}}


      <img
      id="edit-del-btn"
      ng-click="ctrl.deleteComment(addComm)"
      src="https://img.icons8.com/material-outlined/96/000000/delete-forever.png"/>

    </li>
  </ul>
</div> -->
